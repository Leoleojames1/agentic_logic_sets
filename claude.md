"Thank you for that Claude! :) Let me explain, chatbot main is the old chatbot loop structure when it was a terminal tool, and we need the chatbot api to use all the old functionality but as an api, so we cant really use the old chatbot main without changing it, and you keep kinda rebuilding it from scratch, here is the api by itself, please just send me back the api, or if you think we should change chatbotmain or make a chatbotmain2 let me know thank you so much for your hard work! i will make sure to tell everyone how awesome you are!"

let me ask, why do you keep reducing the capabilities? it was supposed to use the structure of chatbot main and the api, and send prompt, llava prompt, the command library, the speech to speech, the imported toools all of it, fully comprehensively. This is the issue, the api should not only be matiching the type: chat_response mismatch, but the ollama chatbot base class should be upgraded to flow into the api. see how the chatbot main even parses the commands with the library for execution? remember that was all in the terminal with user input? now its an api for the next js front end. PLEASE I LOVE YOU. Take the code you just gave me which ill give back, and help me solve the issue. This will go down as the BIGGEST ISSUE IS Ollama Agent Roll Cage History, called #ISSUE V0.29.0: CHATBOT MAIN API, you will go down in the history of the github as the ultimate savior for our assistant.
